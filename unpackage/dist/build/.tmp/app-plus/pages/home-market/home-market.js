(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home-market/home-market"],{6331:function(t,i,a){"use strict";a.r(i);var e=a("d6de"),n=a("a41d");for(var o in n)"default"!==o&&function(t){a.d(i,t,function(){return n[t]})}(o);a("9ada");var s=a("2877"),l=Object(s["a"])(n["default"],e["a"],e["b"],!1,null,null,null);i["default"]=l.exports},"97b8":function(t,i,a){},"9ada":function(t,i,a){"use strict";var e=a("97b8"),n=a.n(e);n.a},a41d:function(t,i,a){"use strict";a.r(i);var e=a("c011"),n=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(i,t,function(){return e[t]})}(o);i["default"]=n.a},c011:function(t,i,a){"use strict";(function(t,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{xm_page_img:this.xm_page_img,carousel_list:[],goods_list:[],activeCategoryId:0,page:1,categories:[{name:"集市",id:0},{name:"礼品卡",id:1},{name:"促销",id:2},{name:"农场动态",id:3}],farm_list:[],paixuTypeList:[],active:null,commentlist:[],animation:"",animationData:"",showModalStatus:!1,shopNum:1,currentGoodInfo:"",harvest_list:[]}},onLoad:function(){var i=this,a=t.getStorageSync("user_info");a&&(i.globalData.user_info=a),this.activity_carousel_list(),this.goods_list_easy(),this.nongchang_trends(),this.user_assess(),this.get_new_user_red_list()},methods:{activity_carousel_list:function(){var i=this;if(i.globalData.user_info.userid)var a={user_id:i.globalData.user_info.userid};this.xm_config.activity_carousel_list(a).then(function(a){if(1==a.data.status){for(var e in a.data.info.carousel_list)a.data.info.carousel_list[e].image=i.utils.imageUrlUtils(a.data.info.carousel_list[e].image);i.carousel_list=a.data.info.carousel_list}else t.showToast({title:a.data.msg,icon:"none"})})},goods_list_easy:function(){var i=this,a={p:this.page,pagenum:20};i.globalData.user_info.userid&&(a.user_id=i.globalData.user_info.userid),1==this.activeCategoryId&&(a.is_gift_card=1),2==this.activeCategoryId&&(a.goods_att=4),this.xm_config.goods_list_easy(a).then(function(a){if(1==a.data.status)if(null!=a.data.info){for(var e in a.data.info)a.data.info[e].default_image=i.utils.imageUrlUtils(a.data.info[e].default_image);1==i.page&&(i.goods_list=[]),i.goods_list=i.goods_list.concat(a.data.info)}else 1==i.page&&(i.goods_list=[]);else 1==i.page&&(i.goods_list=[]),t.showToast({title:a.data.msg,icon:"none"})})},nongchang_trends:function(){var i=this;this.xm_config.nongchang_trends().then(function(a){1==a.data.status?null!=a.data.info&&null!=a.data.info.list&&0!=a.data.info.list.length&&(i.farm_list=a.data.info.list):t.showToast({title:a.data.msg,icon:"none"})})},user_assess:function(){var i=this;this.xm_config.user_assess().then(function(a){1==a.data.status?null!=a.data.info&&null!=a.data.info.filter_all_list&&0!=a.data.info.filter_all_list.length&&(i.paixuTypeList=a.data.info.filter_all_list,i.active=null!=i.active?i.active:a.data.info.filter_all_list[0].num,i.page=1,i.get_commentlist_new_xg(i.page)):t.showToast({title:a.data.msg,icon:"none"})})},get_commentlist_new_xg:function(i){var a=this,e={filter_type:this.active,p:i,pagenum:20};this.xm_config.get_commentlist_new_xg(e).then(function(i){if(1==i.data.status){if(null!=i.data.info&&null!=i.data.info.list_comment&&0!=i.data.info.list_comment.length){for(var e in i.data.info.list_comment)null!=i.data.info.list_comment[e].headimgurl1&&""!=i.data.info.list_comment[e].headimgurl1?i.data.info.list_comment[e].headimgurl1=a.utils.imageUrlUtils(i.data.info.list_comment[e].headimgurl1):i.data.info.list_comment[e].headimgurl1=null,null!=i.data.info.list_comment[e].headimgurl2&&""!=i.data.info.list_comment[e].headimgurl2?i.data.info.list_comment[e].headimgurl2=a.utils.imageUrlUtils(i.data.info.list_comment[e].headimgurl2):i.data.info.list_comment[e].headimgurl2=null,null!=i.data.info.list_comment[e].headimgurl3&&""!=i.data.info.list_comment[e].headimgurl3?i.data.info.list_comment[e].headimgurl3=a.utils.imageUrlUtils(i.data.info.list_comment[e].headimgurl3):i.data.info.list_comment[e].headimgurl3=null,null!=i.data.info.list_comment[e].user_img&&""!=i.data.info.list_comment[e].user_img?i.data.info.list_comment[e].user_img=a.utils.imageUrlUtils(i.data.info.list_comment[e].user_img):i.data.info.list_comment[e].user_img=null;1==a.page&&(a.commentlist=[]),a.commentlist=a.commentlist.concat(i.data.info.list_comment)}}else t.showToast({title:i.data.msg,icon:"none"})})},onSwiperClick:function(i){if(0==i.to_action&&t.navigateTo({url:"../web_page/web_page?web_url="+this.utils.imageUrlUtils(i.content_url)}),4==i.to_action){if(!this.globalData.user_info.userid)return void t.navigateTo({url:"../app_login/app_login"});t.navigateTo({url:"../select-pay-vegetable-field/select-pay-vegetable-field"})}if(6==i.to_action){if(!this.globalData.user_info.userid)return void t.navigateTo({url:"../app_login/app_login"});t.navigateTo({url:"../xuanji/xuanji"})}if(16==i.to_action){if(!this.globalData.user_info.userid)return void t.navigateTo({url:"../app_login/app_login"});t.navigateTo({url:"../invite/inviteFriends/inviteFriends"})}},onGoodsItemClick:function(i){this.globalData.user_info.userid?t.navigateTo({url:"../market-good-new-details/market-good-new-details?goods_id="+i.goods_id}):t.navigateTo({url:"../app_login/app_login"})},tabClick:function(t){this.page=1,this.activeCategoryId=t.id,this.goods_list_easy()},onPaiXuTypeClick:function(t){t=t;this.active=t.num,this.page=1,this.get_commentlist_new_xg(this.page)},onImgClick:function(i,a){a=a,i=i;var e=[];null!=a.headimgurl1&&e.push(a.headimgurl1),null!=a.headimgurl2&&e.push(a.headimgurl2),null!=a.headimgurl3&&e.push(a.headimgurl3),t.previewImage({current:i,urls:e})},onNavMapClick:function(i){i=i;t.openLocation({latitude:parseFloat(i.latitude),longitude:parseFloat(i.longitude),scale:28,name:i.store_name,address:i.address})},onPhoneClick:function(t){t=t;wx.makePhoneCall({phoneNumber:t.tel})},onPullDownRefresh:function(){this.page=1,this.goods_list_easy(),this.get_new_user_red_list()},onReachBottom:function(){3!=this.activeCategoryId?(this.page++,this.goods_list_easy()):(this.page++,this.get_commentlist_new_xg(this.page))},onAddShopCarClick:function(i){if(this.globalData.user_info.userid){var a=i;1!=a.is_gift_card&&(this.shopNum=1,this.currentGoodInfo=a,this.showModal())}else t.navigateTo({url:"../app_login/app_login"})},showModal:function(){t.hideTabBar({animation:!0});var i=t.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=i,i.translateY(800).step(),this.animationData=i.export(),this.showModalStatus=!0,setTimeout(function(){i.translateY(0).step(),this.animationData=i.export()}.bind(this),200)},hideModal:function(){t.showTabBar({animation:!0});var i=this,a=t.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=a,a.translateY(800).step(),this.animationData=a.export(),setTimeout(function(){a.translateY(0).step(),i.animationData=a.export(),i.showModalStatus=!1}.bind(this),200)},addShopCarList:function(){var i=this,a=this.currentGoodInfo,e={user_id:this.globalData.user_info.userid,goods_id:a.goods_id,num:this.shopNum};this.xm_config.add_cart(e).then(function(a){1==a.data.status?(t.showToast({title:"加入菜篮成功"}),i.hideModal()):t.showToast({title:a.data.msg,icon:"none"})})},onJianClick:function(){1!=this.shopNum?this.shopNum=--this.shopNum:t.showToast({title:"该商品不能减少了哦"})},onJiaClick:function(){var i=this.shopNum;i++,i>this.currentGoodInfo.goods_number?t.showToast({icon:"none",title:"当前商品库存不足"}):this.shopNum++},get_new_user_red_list:function(){var i=this;if(i.globalData.user_info.userid){var e={user_id:i.globalData.user_info.userid};this.xm_config.new_user_red_list(e).then(function(e){1==e.data.status?null!=e.data.info&&(i.red_list=e.data.info.red_list,i.harvest_list=e.data.info.harvest_list,console.log(a(i.red_list," at pages\\home-market\\home-market.vue:718"))):t.showToast({title:e.data.msg,icon:"none"})})}},onHarvestClick:function(i){i=i;t.navigateTo({url:"../select-harvest-vegetable/select-harvest-vegetable?harvest_id="+i})},onRegionClick:function(){t.navigateTo({url:"../select-region/select-region/select-region"})}}};i.default=e}).call(this,a("6e42")["default"],a("0de9")["default"])},d6de:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement;t._self._c},n=[];a.d(i,"a",function(){return e}),a.d(i,"b",function(){return n})}},[["9dcd","common/runtime","common/vendor"]]]);