(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/select-pay-vegetable-field/select-pay-vegetable-field"],{"35d6":function(i,t,e){"use strict";var a=e("9e9b"),n=e.n(a);n.a},6447:function(i,t,e){"use strict";e.r(t);var a=e("a26f"),n=e("cedc");for(var s in n)"default"!==s&&function(i){e.d(t,i,function(){return n[i]})}(s);e("35d6");var o=e("2877"),d=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);t["default"]=d.exports},"9e9b":function(i,t,e){},a26f:function(i,t,e){"use strict";var a=function(){var i=this,t=i.$createElement;i._self._c},n=[];e.d(t,"a",function(){return a}),e.d(t,"b",function(){return n})},a68c:function(i,t,e){"use strict";(function(i,e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{current_tab_tc_index:1,is_landowner:0,current_pay_num:1,current_tab_index:1,address_id:"",card_ids:"",ticket_id:"",disable_ticket:0,coupon_info:{},card_info:[],original_order_amount:0,reduce_money:0,pay_amount:0,pintuan_price:0,pintuan_enable:0,isXieyiCheck:!1,landset_info:"",address_info:{},buy_mode:1,send_times:0,index:"",actionSheetHidden:!0,normalList:["每周一","每周二","每周三","每周四","每周五","每周六"],qjfList:["每周一、每周三、每周五","每周二、每周四、每周六"],sendDay:"每周一",week_send_day:1,week_mode:1,couponIsDisable:!1,headImgUrl:"",nickname:"",showModalStatus:!1}},onLoad:function(){this.get_landset_info(),this.calc_maidiset_order_amount();var i=null,t=null;this.globalData.user_info.headimgurl&&(i=this.utils.imageUrlUtils(this.globalData.user_info.headimgurl)),t=this.globalData.user_info.nickname?this.globalData.user_info.nickname:this.globalData.user_info.xcx_nick_name,this.headImgUrl=i,this.nickname=t,1==parseFloat(this.globalData.user_info.is_landowner)?this.is_landowner=1:this.is_landowner=0},methods:{get_landset_info:function(){var t=this,e={set_id:this.current_tab_tc_index};this.xm_config.get_landset_info(e).then(function(e){1==e.data.status?t.landset_info=e.data.info.info:i.showToast({title:e.data.msg,icon:"none"})})},calc_maidiset_order_amount:function(){var t=this,e={user_id:this.globalData.user_info.userid,type:1,disable_ticket:this.disable_ticket,buy_mode:1==this.current_tab_index?1:2,num:this.current_pay_num,set_id:this.current_tab_tc_index};""!=this.address_id&&null!=this.address_id&&(e.address_id=this.address_id),""!=this.card_ids&&null!=this.card_ids&&(e.card_ids=this.card_ids),""!=this.ticket_id&&null!=this.ticket_id&&(e.ticket_id=this.ticket_id),this.xm_config.calc_maidiset_order_amount(e).then(function(e){1==e.data.status?null!=e.data.info&&(t.send_times=e.data.info.send_times,t.address_id=e.data.info.address_id,t.original_order_amount=e.data.info.original_order_amount,t.reduce_money=e.data.info.reduce_money,t.pay_amount=e.data.info.pay_amount,t.pintuan_price=e.data.info.pintuan_price,t.pintuan_enable=e.data.info.pintuan_enable,t.address_info=e.data.info.address_info,t.card_info=t.card_info,null!=e.data.info.coupon_info?t.coupon_info=e.data.info.coupon_info:t.coupon_info={}):(i.showToast({title:e.data.msg,icon:"none"}),t.pay_amount=t.original_order_amount,t.couponIsDisable=!1,t.card_info={},t.reduce_money=0,t.card_ids="")})},onTaoCanTabClick:function(i){this.current_tab_tc_index=i,1==i||2==i?(this.sendDay=this.normalList[0],this.week_send_day=1):(this.sendDay=this.qjfList[0],this.week_mode=1),this.buy_mode=1,this.card_info=[],this.card_ids="",this.ticket_id="",this.disable_ticket=0,this.get_landset_info(),this.calc_maidiset_order_amount()},onGoXieyiClick:function(){i.navigateTo({url:"../field_pro/field_pro"})},onJianClick:function(){1!=this.current_pay_num?(this.current_pay_num=--this.current_pay_num,this.calc_maidiset_order_amount()):i.showToast({title:"购买数量不能小于1",icon:"none"})},onJiaClick:function(){this.current_pay_num=++this.current_pay_num,this.calc_maidiset_order_amount()},onTabClick:function(i){i=i;switch(i){case 0:this.buy_mode=2,this.current_tab_index=i,this.ticket_id="",this.card_ids="",this.card_info=[],this.coupon_info={};break;case 1:this.buy_mode=1,this.current_tab_index=i,this.ticket_id="",this.card_ids="",this.card_info=[],this.coupon_info={};break}this.calc_maidiset_order_amount()},bindSheetItem:function(i,t){t=t,i=i;var e=this.current_tab_tc_index;switch(e){case 1:case 2:this.sendDay=t,this.week_send_day=++i,this.hideModal();break;case 3:this.sendDay=t,this.week_mode=++i,this.hideModal();break}},xieyiCheckboxChange:function(i){this.isXieyiCheck=!this.isXieyiCheck},actionSheetTap:function(i){this.showModal()},onCunponClick:function(){i.navigateTo({url:"../select-coupon-pay-field/select-coupon-pay-field?couponInfo="+JSON.stringify(this.coupon_info)+"&goodTotalPrice="+this.original_order_amount+"&coupon_type=1&set_id="+this.current_tab_tc_index})},goCardList:function(){var t=0;0==this.current_tab_index&&(t=3),i.navigateTo({url:"../paycards/paycards?type="+t+"&set_id="+this.current_tab_tc_index+"&num="+this.current_pay_num+"&choose="+this.card_ids})},setAddress:function(){i.navigateTo({url:"../address/select-address-list/select-address-list"})},setAddressInfo:function(i){null!=i&&null!=i.id&&(this.address_id=i.id),this.calc_maidiset_order_amount()},surePay:function(){this.isXieyiCheck?""!=this.address_id&&null!=this.address_id?this.add_maidi_order():i.showToast({title:"请选择收货地址",icon:"none"}):i.showToast({title:"请先勾选用地协议",icon:"none"})},add_maidi_order:function(){var t=this,e={user_id:this.globalData.user_info.userid,address_id:this.address_id,set_id:this.current_tab_tc_index,disable_ticket:this.disable_ticket,buy_mode:this.buy_mode,num:this.current_pay_num,week_mode:this.week_mode,week_send_day:this.week_send_day};""!=this.card_ids&&null!=this.card_ids&&(e.card_ids=this.card_ids),""!=this.ticket_id&&null!=this.ticket_id&&(e.ticket_id=this.ticket_id),this.xm_config.add_maidi_order(e).then(function(e){1==e.data.status?null!=e.data.info&&(t.order_id=e.data.info.order_id,1==e.data.info.is_pay?t.getWxParam():i.redirectTo({url:"../pay-field-success/pay-field-success?order_id="+t.order_id})):i.showToast({title:e.data.msg,icon:"none"})})},getWxParam:function(){var t=this,a={order_id:this.order_id};console.log(e("11111111111111111111111111111111111111111"," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:572")),console.log(e(this.order_id," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:573")),a.payment_code="weixinapp",this.xm_config.weixinxcx_add_order(a).then(function(e){1==e.data.status?null!=e.data.info&&null!=e.data.info.pay_info&&t.weixinappPay(e.data.info.pay_info):i.showToast({title:e.data.msg,icon:"none"})})},weixinxcxPay:function(t){var a=this;console.log(e(t," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:607")),i.requestPayment({provider:"wxpay",timeStamp:t.timeStamp+"",nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.sign,success:function(t){i.redirectTo({url:"../pay-field-success/pay-field-success?order_id="+a.order_id})},fail:function(t){console.log(e(t," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:622")),i.showToast({icon:"none",title:"支付失败"})}})},weixinappPay:function(t){var a=this;i.requestPayment({provider:"wxpay",orderInfo:JSON.stringify({appid:t.appid,noncestr:t.noncestr,package:t.package,partnerid:t.partnerid,prepayid:t.prepayid,timestamp:t.timestamp+"",sign:t.sign}),success:function(t){console.log(e(t," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:649")),i.showToast({icon:"none",title:"支付成功"}),i.redirectTo({url:"../pay-field-success/pay-field-success?order_id="+a.order_id})},fail:function(t){console.log(e(t," at pages\\select-pay-vegetable-field\\select-pay-vegetable-field.vue:660")),i.showToast({icon:"none",title:"支付失败"})}})},showModal:function(){var t=i.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=t,t.translateY(800).step(),this.animationData=t.export(),this.showModalStatus=!0,setTimeout(function(){t.translateY(0).step(),this.animationData=t.export()}.bind(this),200)},hideModal:function(){var t=this,e=i.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=e,e.translateY(800).step(),this.animationData=e.export(),setTimeout(function(){e.translateY(0).step(),t.animationData=e.export(),t.showModalStatus=!1}.bind(this),200)},setCardData:function(i,t){if(null!=i&&0!=i.length){var e="";i.forEach(function(i){e+=i,e+=","}),e.length>0&&(e=e.substring(0,e.length-1)),this.card_ids=e,this.coupon_info={},this.ticket_id=""}else delete this.card_ids;null!=t&&(this.card_info=t),this.calc_maidiset_order_amount()},setCunponData:function(i){null==i?(this.coupon_info={},delete this.ticket_id,this.disable_ticket=1):(this.coupon_info=i,this.ticket_id=i.id,this.disable_ticket=0),this.calc_maidiset_order_amount()}}};t.default=a}).call(this,e("6e42")["default"],e("0de9")["default"])},cedc:function(i,t,e){"use strict";e.r(t);var a=e("a68c"),n=e.n(a);for(var s in a)"default"!==s&&function(i){e.d(t,i,function(){return a[i]})}(s);t["default"]=n.a}},[["4ebe","common/runtime","common/vendor"]]]);