(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myfield/myfield"],{"0f5b":function(e,t,i){"use strict";var a=i("1ffb"),s=i.n(a);s.a},1229:function(e,t,i){"use strict";i.r(t);var a=i("1aef"),s=i("c773");for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);i("0f5b");var l=i("2877"),d=Object(l["a"])(s["default"],a["a"],a["b"],!1,null,null,null);t["default"]=d.exports},"1aef":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},s=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},"1ffb":function(e,t,i){},c773:function(e,t,i){"use strict";i.r(t);var a=i("fef0"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=s.a},fef0:function(e,t,i){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{vegetablefield_id:"",vegtablefieldList:"",list_type:"",set_id:"",current_vegetablefield_info:"",shiPinSrc:"",vegetablefield_info:"",page:1,harvest_tip:"",harvest_tip2:"",harvest_list:"",harvest_vegtable_address:"",harvest_vegtable_info_data:"",harvest_id:""}},onLoad:function(e){this.vegetablefield_id=e.id},onShow:function(e){this.my_vegtablefield_list()},methods:{vegetableList:function(){wx.navigateTo({url:"../my-seed-menu/my-seed-menu?set_id="+this.set_id+"&list_type="+this.list_type})},onFreeClick:function(){e.navigateTo({url:"../fee-pay-vegetable-field/fee-pay-vegetable-field?vegetablefield_id="+this.vegetablefield_id+"&set_id="+this.set_id+"&is_year_month="+this.harvest_vegtable_info_data.is_year_month})},onShouCaiLogClick:function(){e.navigateTo({url:"../receive-cai-new-log/receive-cai-new-log?vegetablefield_id="+this.vegetablefield_id})},onSelectCaiClick:function(t){0!=t.is_allow_harvest?e.navigateTo({url:"../select-harvest-vegetable/select-harvest-vegetable?harvest_id="+t.id}):e.showToast({title:this.harvest_tip,icon:"none"})},onSendPeopleClick:function(t){this.harvest_id=t.id,2!=t.sell_status?e.navigateTo({url:"../address/select-address-list-baoyou/select-address-list-baoyou?address_type=1&period_number_id=0&harvest_id="+this.harvest_id+"&vegetablefield_id="+this.vegetablefield_id}):e.showToast({title:"正在出售，无法送人",icon:"none"})},onWuLiuClick:function(t){t&&e.navigateTo({url:"../logistics/logistics?&name="+t.expresses_name+"&num="+t.expresses_number+"&name_text="+t.express_name_text})},onReachBottom:function(){this.page++,this.harvest_vegtable_list(this.page)},tabClick:function(e){var t=e.id,i=e.set_id,a=e.greenhouse_camera_url;this.current_vegetablefield_info=e,this.vegetablefield_id=t,this.set_id=i,this.shiPinSrc=a||"https://",this.harvest_vegtable_info()},my_vegtablefield_list:function(){var t=this,i={user_id:this.globalData.user_info.userid,type:0};this.xm_config.my_vegtablefield_list(i).then(function(i){if(1==i.data.status){if(null!=i.data.info&&null!=i.data.info.list&&0!=i.data.info.list.length){for(var a=0,s=0,n=0,l=0;l<i.data.info.list.length;l++)"1"==i.data.info.list[l].set_id&&(a=1),"2"==i.data.info.list[l].set_id&&(s=1);if(a+s==2&&(n=1),null==t.vegetablefield_id||""==t.vegetablefield_id)t.vegtablefieldList=i.data.info.list,t.list_type=n,t.set_id=i.data.info.list[0].set_id,t.current_vegetablefield_info=i.data.info.list[0],t.shiPinSrc=i.data.info.list[0].greenhouse_camera_url,t.vegetablefield_id=i.data.info.list[0].id;else{var d=!0,o=!1,_=void 0;try{for(var r,f=i.data.info.list[Symbol.iterator]();!(d=(r=f.next()).done);d=!0){var v=r.value;if(v.id==t.vegetablefield_id){t.vegtablefieldList=i.data.info.list,t.list_type=n,t.set_id=v.set_id,t.current_vegetablefield_info=v,t.shiPinSrc=v.greenhouse_camera_url,t.vegetablefield_id=v.id;break}}}catch(u){o=!0,_=u}finally{try{d||null==f.return||f.return()}finally{if(o)throw _}}}t.harvest_vegtable_info()}}else e.showToast({title:i.data.msg,icon:"none"})})},harvest_vegtable_info:function(){var t=this,i={user_id:this.globalData.user_info.userid,vegetablefield_id:this.vegetablefield_id};this.xm_config.harvest_vegtable_info(i).then(function(i){1==i.data.status?null!=i.data.info&&(null!=i.data.info.vegetablefield_info&&(i.data.info.vegetablefield_info.close_time=i.data.info.vegetablefield_info.close_time.substring(0,10),t.current_vegetablefield_info.close_time=i.data.info.vegetablefield_info.close_time,t.vegetablefield_info=i.data.info.vegetablefield_info),t.harvest_vegtable_info_data=i.data.info,t.harvest_vegtable_address=i.data.info.send_address,t.page=1,t.harvest_vegtable_list(t.page)):e.showToast({title:i.data.msg,icon:"none"})})},harvest_vegtable_list:function(t){1==t&&(this.harvest_list=[]);var i=this,a={user_id:this.globalData.user_info.userid,vegetablefield_id:this.vegetablefield_id,p:t,pagenum:5};this.xm_config.harvest_vegtable_list(a).then(function(a){1==a.data.status?null!=a.data.info&&null!=a.data.info.harvest_list?(i.harvest_tip=a.data.info.prompt2,i.harvest_tip2=a.data.info.prompt,i.harvest_list=i.harvest_list.concat(a.data.info.harvest_list)):1==t&&(i.harvest_list=[]):e.showToast({title:a.data.msg,icon:"none"})})},onSelectDateClick:function(t){t=t;if(2!=t.sell_status&&"2"!=t.sell_status)if(3!=t.sell_status&&"3"!=t.sell_status){var i=t.id;this.harvest_id=i;var a={start_time:t.harvest_date+"".substring(0,10),close_time:t.close_time+"".substring(0,10),text_dex:t.update_date_text};e.navigateTo({url:"../select-calendar/select-calendar?param="+JSON.stringify(a)})}else e.showToast({title:"该次蔬菜已售出，不可修改！",icon:"none"});else e.showToast({title:"当前收菜正在出售中，不可修改日期",icon:"none"})},setSendTime:function(t){t=t;var i={harvest_id:this.harvest_id,date:t.re},a=this;this.xm_config.update_send_date(i).then(function(t){1==t.data.status?(e.showToast({title:"设置成功",icon:"none"}),a.page=1,a.harvest_vegtable_list(a.page),e.navigateBack({})):e.showToast({title:t.data.msg,icon:"none"})})},setAddress:function(){e.navigateTo({url:"../address/select-address-list-baoyou/select-address-list-baoyou?address_type=1&period_number_id=0&harvestInfo="+JSON.stringify(this.harvest_list[0])+"&vegetablefield_id="+this.vegetablefield_id})},setAddressInfo:function(e){this.harvest_vegtable_address={id:e.id,address:e.region_name+e.city+e.address,phone:e.phone_mob,name:e.consignee},this.update_field_address(e.id)},update_field_address:function(t,i){var a={address_id:t,vegetablefield_id:this.vegetablefield_id};this.xm_config.update_field_address(a).then(function(t){1==t.data.status?e.showToast({title:"设置成功",icon:"none"}):e.showToast({title:t.data.msg,icon:"none"})})},setSendAddressInfo:function(e){this.update_send_address(e.id)},update_send_address:function(t){var a=this,s={address_id:t,harvest_id:this.harvest_id};console.log(i(this.harvest_id," at pages\\myfield\\myfield.vue:651")),this.xm_config.update_send_address(s).then(function(t){1==t.data.status?(e.showToast({title:"送人修改成功",icon:"none"}),a.page=1,a.harvest_vegtable_list(a.page)):e.showToast({title:t.data.msg,icon:"none"})})},update_harvest_vegtable_list:function(){this.page=1,this.harvest_vegtable_list(this.page)}}};t.default=a}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["5a7d","common/runtime","common/vendor"]]]);